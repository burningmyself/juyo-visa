<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>添加-日本招宝信息</title>
    <link rel="stylesheet" href="/res/plugin/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/res/plugin/kendoui/styles/kendo.common.min.css"/>
    <link rel="stylesheet" href="/res/plugin/kendoui/styles/kendo.office365.min.css"/>
    <link rel="stylesheet" href="/res/plugin/font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="/res/css/colors.min.css"/>
    <link rel="stylesheet" href="/res/css/common.min.css?v=1"/>
    <link rel="stylesheet" href="/res/plugin/h+/css/main.css"/><!--修改的样式-->
      <link rel="stylesheet" href="/res/upload/uploadify.css"/>
    <style type="text/css">
    	.companyChopBtn {opacity:0;width:128px;height:31px;cursor:pointer; position:relative;top:-25px;}
    	.companyChopA{background-color:#0172c6;color:#fff;padding:8px 15px;font-size:13px;}
    	.imgPreview{width: 99.5%; height: 200px;text-align: center;line-height: 200px;}
    	#img{width: 99.5%; height: 200px;text-align: center;line-height: 200px;}
    	#uploadFile-button{width:100px !important;}
    	object#SWFUpload_0 {width: 100px !important;}
    	.upload-btn {position: relative;left: -15px;}
    	.input-group{width:100%;}/*由于删掉小灯泡 宽度出现问题 此处理设置所有input、select等宽度等于父类*/
    </style>
</head>
<body>
<div>
    <div class="container-fluid" style="padding-top: 15px;margin-bottom: 25px;">
        <div class="row">
            <div class="col-xs-12 padding-0">
                <ul id="panelbar">
                    <li>
                    	<form id="addForm" method="post">
	                        <div class="container-fluid">
	                        	<!-- 状态 -->
								<div class="row">
	                            	<div class="col-xs-4">
	                                    <div class="form-group">
	                                        <div class='input-group'>
	                                            <select id="state" name=" " style="width:100%; height: 29.82px; border-color: #c9c9c9;"
	                                                    data-role="dropdownlist"
	                                                    data-value-primitive="true"
	                                                    data-bind="value:customer.comType">
	                                                <option value="1">送签社</option>
	                                                <option value="2">地接社</option>
	                                            </select>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                               	 </div>
		                        </div>
		                        <!-- end 状态 -->
	                        
	                        	<!-- 公司全称 -->
	                            <div class="row" id="1">
	                                <div class="col-xs-12">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">公司全称:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.comFullName"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 公司全称 -->
								
								<!-- 住所 -->
	                            <div class="row" id="2">
	                                <div class="col-xs-12">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">住所:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.address"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 住所 -->
	                        	<!-- 公司全称 -->
	                            <div class="row" id="3">
	                                <div class="col-xs-12">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">公司全称:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.landcomFullName"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 公司全称 -->
								
								<!-- 住所 -->
	                            <div class="row" id="4">
	                                <div class="col-xs-12">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">住所:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.landaddress"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 住所 -->
								
								<!-- 担当者/携帯电话/TEL/FAX -->
	                            <div class="row songqianshe-div">
	                                <div class="col-xs-6 ">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">担当者:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.linkman"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                                <div class="col-xs-6 PortableIpone">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">携帯电话:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.phone"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                                <div class="col-xs-6">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">TEL:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.telephone"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                                <div class="col-xs-6 FAX">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">FAX:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.fax"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 担当者/携帯电话/TEL/FAX -->
								
								<!-- 担当者/TEL -->
	                            <div class="row dijieshe-div">
	                                <div class="col-xs-6 ">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">担当者:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.landlinkman"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                                <div class="col-xs-6">
	                                    <div class="form-group">
	                                        <label for="last_name_cn">TEL:<span style="color: red">*</span></label>
	                                        <div class='input-group'>
	                                            <input id="" name="" type="text" class="k-textbox" placeholder="" style="width: 100%;" data-bind="value:customer.landtelephone"/>
	                                            <!-- <span class='input-group-addon'><i class='fa fa-lg fa-fw fa-lightbulb-o'></i></span> -->
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 担当者/TEL -->
								
								<!-- 上传公司公章Button -->
	                            <div class="row companyChopDiv" style="margin-top:15px;">
	                                <div class="col-xs-4">
	                                    <!-- <div class="form-group">
	                                    	 <a href="javascript:;" class="companyChopA">上传公司公章</a>
	                                         <input type="file" class="companyChopBtn">
	                                    </div> -->
	                                	<div class="form-group">
						      				<!-- <label class="">上传公司公章:</label> -->
						      				<div class="upload-btn"> 
						      					<button id="uploadFile" name="file" type="file" class="btn btn-primary btn-sm" >上传公司公章</button>
						      					<span id="completeFileName"></span>
						      					<span id="photoname"></span>
						      					<span id="yvlan"></span>
						      				</div>
						      			</div>
	                                </div>
	                                <div class="col-xs-8">
	                                    <div class="form-group">
	                                    	 <div class="imgPreview">
	                                    	 	<img alt="公司公章" src="" id="img">
	                                    	 </div>
	                                    </div>
	                                </div>
	                            </div>
								<!-- end 上传公司公章Button -->
	                      </div>
	                   </form>   
                    </li>
                </ul>
            </div>
        </div>
        <div class="row" >
            <div class="col-xs-12">
                <div class="form-group">
                    <button id="saveBtn" class="k-primary k-button col-xs-12" onclick="ordersave();"><i class="fa fa-save"></i> 保存</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<!--引入 js 库文件-->
<script src="/res/plugin/template.js"></script>
<script src="/res/plugin/jquery.min.js"></script>
<script src="/res/plugin/layer/layer.js"></script>
<script src="/res/plugin/kendoui/js/kendo.web.min.js"></script>
<script src="/res/plugin/kendoui/js/cultures/kendo.culture.zh-CN.min.js"></script>
<script src="/res/plugin/kendoui/js/messages/kendo.messages.zh-CN.min.js"></script>
<script src="/res/js/common.js"></script>
<script src="/res/plugin/webtoolkit.md5.js"></script>
<script src="/res/js/idcard.js"></script>
<script src="/res/js/comebaby/comEdit.js"></script>
<script src="/res/upload/jquery.uploadify.min.js"></script>
<script src="/res/js/projectpath/projectpath.js"></script>
<script type="text/javascript">
$(function(){
    uploadFile();
    $('#uploadFile-button span').html("上传公司公章");
});
$(function(){
	$('.companyChopDiv').hide();//上传公司公章部分 默认隐藏
	$('.dijieshe-div').hide();
	$('#state').change(function(){
		var stateInfo=$(this).find("option:selected").text();
		if(stateInfo=="地接社"){
			$('.dijieshe-div').show();//显示 地接社：担当者/TEL 
			$('.companyChopDiv').show();//显示 上传公司公章部分
			$('.songqianshe-div').hide();//隐藏 送签社：担当者/携带电话/TEL/FAX
			$('#1').hide();
			$('#2').hide();
			$("#3").show();
			$("#4").show();
			viewModel.set("customer.comFullName","");
			viewModel.set("customer.address","");
			viewModel.set("customer.linkman","");
			viewModel.set("customer.phone","");
			viewModel.set("customer.telephone","");
			viewModel.set("customer.Fax","");
		}else if(stateInfo=="送签社"){
			viewModel.set("customer.landcomFullName","");
			viewModel.set("customer.landaddress","");
			viewModel.set("customer.landlinkman","");
			viewModel.set("customer.landtelephone","");
			viewModel.set("customer.sealUrl","");
			viewModel.set("customer.sealName","");
			$("#img").attr('src',"");
			$("#3").hide();
			$("#4").hide();
			$('#1').show();
			$('#2').show();
			$('.songqianshe-div').show();//显示 送签社：担当者/携带电话/TEL/FAX
			$('.companyChopDiv').hide();//隐藏 上传公司公章部分
			$('.dijieshe-div').hide();//隐藏  地接社：担当者/TEL
		}
	});
});




//文件上传
function uploadFile(){
/* 	alert(localhostPaht);
	alert(curWwwPath);
	alert(pathName); */
	 var index=null;
	$.fileupload1 = $('#uploadFile').uploadify({
		'auto' : true,//选择文件后自动上传
		'formData' : {
			'fcharset' : 'uft-8'/* ,
			'action' : 'uploadimage' */
		},
		'buttonText' : '上传',//按钮显示的文字
		'fileSizeLimit' : '3000MB',
		'fileTypeDesc' : '文件',//在浏览窗口底部的文件类型下拉菜单中显示的文本
		 'fileTypeExts' : '*.png;*.jpg; *.jpeg; *.gif;',//上传文件的类型
		'swf' : '/res/upload/uploadify.swf',//指定swf文件
		'multi' : false,//multi设置为true将允许多文件上传
		'successTimeout' : 1800, 
		/* 'queueSizeLimit' : 100, */
		'uploader' : localhostPaht+'/visa/comebaby/uploadFile',
		//下面的例子演示如何获取到vid
		'onUploadStart':function(file){
			index = layer.load(1, {shade: [0.1,'#fff']});//0.1透明度的白色背景 
		},
		 'onUploadSuccess': function(file, data, response) {
			 var fileName = file.name;//文件名称
			var photoname= "<a id='downloadA' href='#'>"
            + file.name
            + "</a>";
			 ///console.log(file);
			/* 	var jsonobj = eval('(' + data + ')');
				var url  = jsonobj;//地址 */
				///console.log(data);
			 ///console.log(response);
			/*  alert(typeof data); */
			 if(index!=null){
					layer.close(index);
			 }
			 /*显示 预览 按钮*/
			viewModel.set("customer.sealUrl",data);
			viewModel.set("customer.sealName",fileName);
           		$("#img").attr('src',data);
			/*$("#yvlan").html('<a href="'+data+'">预览</a>'); */
      
		},
       //加上此句会重写onSelectError方法【需要重写的事件】
       'overrideEvents': ['onSelectError', 'onDialogClose'],
       //返回一个错误，选择文件的时候触发
       'onSelectError':function(file, errorCode, errorMsg){
       	///console.log(errorMsg);
           switch(errorCode) {
               case -110:
                   alert("文件 ["+file.name+"] 大小超出系统限制！");
                   break;
               case -120:
                   alert("文件 ["+file.name+"] 大小异常！");
                   break;
               case -130:
                   alert("文件 ["+file.name+"] 类型不正确！");
                   break;
           }
       },
       'onUploadError':function(file, errorCode, errorMsg, errorString){
       	/* alert('The file ' + file.name + ' could not be uploaded: ' + errorString); */
       }
	});
}
</script>
</html>
